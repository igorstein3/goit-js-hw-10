{"version":3,"file":"1-timer.js","sources":["../src/img/alert-icon.svg","../src/js/1-timer.js"],"sourcesContent":["export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cpath%20fill='%23FAFAFB'%20d='M6.81.219A.75.75%200%200%201%207.34%200h9.32a.75.75%200%200%201%20.53.219l6.591%206.591a.75.75%200%200%201%20.219.53v9.32a.75.75%200%200%201-.219.53l-6.591%206.591a.75.75%200%200%201-.53.219H7.34a.75.75%200%200%201-.53-.219L.219%2017.19A.75.75%200%200%201%200%2016.66V7.34a.75.75%200%200%201%20.219-.53L6.81.219ZM7.65%201.5%201.5%207.65v8.7l6.15%206.15h8.7l6.15-6.15v-8.7L16.35%201.5h-8.7Z'/%3e%3cpath%20fill='%23FAFAFB'%20d='M6.969%206.969a.75.75%200%200%201%201.062%200L12%2010.939l3.969-3.97a.75.75%200%201%201%201.062%201.062L13.061%2012l3.97%203.969a.752.752%200%200%201-1.062%201.062L12%2013.061l-3.969%203.97a.752.752%200%200%201-1.282-.531.751.751%200%200%201%20.22-.531L10.939%2012%206.97%208.031a.75.75%200%200%201%200-1.062Z'/%3e%3c/svg%3e\"","'use strict';\nimport flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport iconErr from \"../img/alert-icon.svg\";\n\nlet userSelectedDate = null;\nconst refs = {\n  startBtn: document.querySelector('[data-start]'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n  dateTimeInput: document.querySelector(\"#datetime-picker\"),\n};\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n};\n\nfunction timeToSTR({ days, hours, minutes, seconds }) {\n  days = days.toString().padStart(2, '0');\n  hours = hours.toString().padStart(2, '0');\n  minutes = minutes.toString().padStart(2, '0');\n  seconds = seconds.toString().padStart(2, '0');\n  return { days, hours, minutes, seconds }\n};\n\nconst iziToastOptions = {\n          message: 'Please choose a date in the future',\n          messageColor: '#fff',\n          messageSize: '16px',\n          messageLineHeight: '150%',\n          backgroundColor: '#ef4040',\n          iconColor: '#fff',\n          iconUrl: iconErr,\n          close: true,\n          closeOnEscape: true,\n          closeOnClick: true,\n          position: 'topRight',\n        };\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    const result = tick();\n      if (result <= 0) {\n        iziToast.show(iziToastOptions);\n         refs.startBtn.disabled = true;\n        refs.startBtn.classList.add('disable-btn')\n      } else {\n         refs.startBtn.disabled = false;\n        refs.startBtn.classList.remove('disable-btn')\n       }\n  },\n};\n\n\nfunction tick() {\n  const nowDate = Date.now();\n  const userSelectedDateUNIX = userSelectedDate.getTime();\n  return userSelectedDateUNIX - nowDate;\n};\n\nconst fp = flatpickr(refs.dateTimeInput, options);  // flatpickr\n\nconst timer = {\n  intervalId: null,\n  start() {\n    refs.startBtn.disabled = true;\n    refs.startBtn.classList.add('disable-btn');\n    refs.dateTimeInput.disabled = true;\n    refs.dateTimeInput.classList.add('disable-input')\n    this.intervalId = setInterval(() => {\n      const timerValue = tick();\n      const padeStartedDate = timeToSTR(convertMs(timerValue));\n      refs.days.textContent = padeStartedDate.days;\n      refs.hours.textContent = padeStartedDate.hours;\n      refs.minutes.textContent = padeStartedDate.minutes;\n      refs.seconds.textContent = padeStartedDate.seconds;\n      if (timerValue < 1000) {\n        clearInterval(this.intervalId); \n        refs.dateTimeInput.disabled = false;\n        refs.dateTimeInput.classList.remove('disable-input')\n      }\n    }, 1000);\n  },\n};\n\nrefs.startBtn.addEventListener('click', () => {\n  timer.start();\n});\n\n\n\n\n\n\n"],"names":["iconErr","userSelectedDate","refs","convertMs","ms","days","hours","minutes","seconds","timeToSTR","iziToastOptions","options","selectedDates","tick","iziToast","nowDate","flatpickr","timer","timerValue","padeStartedDate"],"mappings":"+IAAA,MAAeA,EAAA,23BCOf,IAAIC,EAAmB,KACvB,MAAMC,EAAO,CACX,SAAU,SAAS,cAAc,cAAc,EAC/C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,EAChD,cAAe,SAAS,cAAc,kBAAkB,CAC1D,EAEA,SAASC,EAAUC,EAAI,CAOrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAU,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACpD,OAAAH,EAAOA,EAAK,SAAQ,EAAG,SAAS,EAAG,GAAG,EACtCC,EAAQA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,EACxCC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EAC5CC,EAAUA,EAAQ,SAAQ,EAAG,SAAS,EAAG,GAAG,EACrC,CAAE,KAAAH,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC1C,CAEA,MAAME,EAAkB,CACd,QAAS,qCACT,aAAc,OACd,YAAa,OACb,kBAAmB,OACnB,gBAAiB,UACjB,UAAW,OACX,QAASV,EACT,MAAO,GACP,cAAe,GACf,aAAc,GACd,SAAU,UACpB,EAEMW,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBX,EAAmBW,EAAc,CAAC,EACnBC,KACC,GACZC,EAAS,KAAKJ,CAAe,EAC5BR,EAAK,SAAS,SAAW,GAC1BA,EAAK,SAAS,UAAU,IAAI,aAAa,IAExCA,EAAK,SAAS,SAAW,GAC1BA,EAAK,SAAS,UAAU,OAAO,aAAa,EAEjD,CACH,EAGA,SAASW,GAAO,CACd,MAAME,EAAU,KAAK,MAErB,OAD6Bd,EAAiB,UAChBc,CAChC,CAEWC,EAAUd,EAAK,cAAeS,CAAO,EAEhD,MAAMM,EAAQ,CACZ,WAAY,KACZ,OAAQ,CACNf,EAAK,SAAS,SAAW,GACzBA,EAAK,SAAS,UAAU,IAAI,aAAa,EACzCA,EAAK,cAAc,SAAW,GAC9BA,EAAK,cAAc,UAAU,IAAI,eAAe,EAChD,KAAK,WAAa,YAAY,IAAM,CAClC,MAAMgB,EAAaL,IACbM,EAAkBV,EAAUN,EAAUe,CAAU,CAAC,EACvDhB,EAAK,KAAK,YAAciB,EAAgB,KACxCjB,EAAK,MAAM,YAAciB,EAAgB,MACzCjB,EAAK,QAAQ,YAAciB,EAAgB,QAC3CjB,EAAK,QAAQ,YAAciB,EAAgB,QACvCD,EAAa,MACf,cAAc,KAAK,UAAU,EAC7BhB,EAAK,cAAc,SAAW,GAC9BA,EAAK,cAAc,UAAU,OAAO,eAAe,EAEtD,EAAE,GAAI,CACR,CACH,EAEAA,EAAK,SAAS,iBAAiB,QAAS,IAAM,CAC5Ce,EAAM,MAAK,CACb,CAAC"}